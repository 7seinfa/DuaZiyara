<!DOCTYPE html>
<html style="height: 100%;">

<head>
<link rel="stylesheet" href="style.css">
</head>

<body>
	
	<div id="startPage">
		
		<div id = "duas" class = "container">
			<h1 class = "title">Duas</h1>
			<div id = "duaNames" class = "innerContainer">
			
			</div>
		</div>
		
		<div id = "Ramadan Duas" class = "container">
			<h1 class = "title">Duas</h1>
			<div id = "ramDuaNames" class = "innerContainer">
			
			</div>
		</div>
		
		<div id = "ziyaras" class = "container">
			<h1 class = "title">Ziyaras</h1>
			<div id = "ziyaraNames" class = "innerContainer">
			
			</div>
		</div>
		
		<div class = "container">
			<h1 class = "title">Settings</h1>
			<div id = "settings" class = "innerContainer" style = "columns: 1;columns: 1;display: inline-flex;width: -moz-available;">
				<div id = "slideshowSettings" style="float: left;width:50%;">
					<h1 class = "enabled" id = "slide">Slideshow</h1>
					<div class = "row">
						<h2>Transition Speed:</h2>
						<input class = "right" id = "tSpeed" type = "text" value = "1"></input>
					</div>
					<br>
					<h2>Arabic Color Options (Hex):</h2>
					<div class = "row">
						<h2>Top:</h2>
						<input class = "right" id = "arTop" type = "text" value = "#006161"></input>
					</div>
					<div class = "row">
						<h2>Bottom</h2>
						<input class = "right" id = "arBot" type = "text" value = "#009494"></input>
					</div>
					<br>
					<div class = "row">
						<h2>Arabic Text Color</h2>
						<input class = "right" id = "arText" type = "text" value = "#FFFFFF"></input>
					</div>
					<br>
					<h2>English Color Options (Hex):</h2>
					<div class = "row">
						<h2>Top:</h2>
						<input class = "right" id = "enTop" type = "text" value = "#48bf84"></input>
					</div>
					<div class = "row">
						<h2>Bottom</h2>
						<input class = "right" id = "enBot" type = "text" value = "#439775"></input>
					</div>
					<br>
					<div class = "row">
						<h2>English Text Color</h2>
						<input class = "right" id = "enText" type = "text" value = "#FFFFFF"></input>
					</div>
					<br>
					<div class = "row">
						<h2>English Font Size (vw)</h2>
						<input class = "right" id = "enFont" type = "text" value = "2vw"></input>
					</div>
					<div class = "row">
						<h2>Arabic Font Size (vw)</h2>
						<input class = "right" id = "arFont" type = "text" value = "3vw"></input>
					</div>
				</div>
				<div id = "overlaySettings" style="float: right;width: 50%;margin-left: 3%;">
					<h1 class = "disabled" id = "overlay">Overlay</h1>
					<div class = "row">
						<h2>Transition Speed:</h2>
						<input class = "right" id = "tSpeedO" type = "text" value = "1"></input>
					</div>
					<br>
					<h2>Size (in pixels):</h2>
					<div class = "row">
						<h2>Width:</h2>
						<input class = "right" id = "width" type = "text" value = "1920"></input>
					</div>
					<div class = "row">
						<h2>Height</h2>
						<input class = "right" id = "height" type = "text" value = "200"></input>
					</div>
					<br>
					<h2>Arabic Color Options (Hex):</h2>
					<div class = "row">
						<h2>Top:</h2>
						<input class = "right" id = "arTopO" type = "text" value = "#006161"></input>
					</div>
					<div class = "row">
						<h2>Bottom</h2>
						<input class = "right" id = "arBotO" type = "text" value = "#009494"></input>
					</div>
					<br>
					<div class = "row">
						<h2>Arabic Text Color</h2>
						<input class = "right" id = "arTextO" type = "text" value = "#FFFFFF"></input>
					</div>
					<br>
					<h2>English Color Options (Hex):</h2>
					<div class = "row">
						<h2>Top:</h2>
						<input class = "right" id = "enTopO" type = "text" value = "#48bf84"></input>
					</div>
					<div class = "row">
						<h2>Bottom</h2>
						<input class = "right" id = "enBotO" type = "text" value = "#439775"></input>
					</div>
					<br>
					<div class = "row">
						<h2>English Text Color</h2>
						<input class = "right" id = "enTextO" type = "text" value = "#FFFFFF"></input>
					</div>
					<br>
					<div class = "row">
						<h2>English Font Size (vw/px)</h2>
						<input class = "right" id = "enFontO" type = "text" value = "1.5vw"></input>
					</div>
					<div class = "row">
						<h2>Arabic Font Size (vw/px)</h2>
						<input class = "right" id = "arFontO" type = "text" value = "2.5vw"></input>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="duaPage" style = "display: none;">
		<div id = "arabic">
		
		</div>
		<div class = "separate"></div>
		<div id = "english">
			
		</div>
	</div>
	<script>
		var duaObj; //dua json file
		var ziyaraObj; //ziyara json file
		var ramObj; //ziyara json file


		/* START PAGE */
		//settings
		var slideshow = true;
		document.getElementById("slide").addEventListener("mousedown", function(){
			slideshow=true;
			document.getElementById("slide").setAttribute("class", "enabled");
			document.getElementById("overlay").setAttribute("class", "disabled");
		});
		document.getElementById("overlay").addEventListener("mousedown", function(){
			slideshow=false;
			document.getElementById("slide").setAttribute("class", "disabled");
			document.getElementById("overlay").setAttribute("class", "enabled");
		});
		
		var transitionSpeed = document.getElementById("tSpeed").value;
		document.getElementById("tSpeed").addEventListener("keyup", function(){transitionSpeed=document.getElementById("tSpeed").value;});
		
		var arTop = document.getElementById("arTop").value;
		document.getElementById("arTop").addEventListener("keyup", function(){arTop=document.getElementById("arTop").value;document.getElementById("arabic").style.backgroundImage="linear-gradient("+arTop+", "+arBot+")";});
		
		var arBot = document.getElementById("arBot").value;document.getElementById("arabic").style.backgroundImage="linear-gradient("+arTop+", "+arBot+")";
		document.getElementById("arBot").addEventListener("keyup", function(){arBot=document.getElementById("arBot").value;document.getElementById("arabic").style.backgroundImage="linear-gradient("+arTop+", "+arBot+")";});
		
		var arText = document.getElementById("arText").value;document.getElementById("arabic").style.color=arText;
		document.getElementById("arText").addEventListener("keyup", function(){arText=document.getElementById("arText").value;document.getElementById("arabic").style.color=arText;});
		
		var enTop = document.getElementById("enTop").value;
		document.getElementById("enTop").addEventListener("keyup", function(){enTop=document.getElementById("enTop").value;document.getElementById("english").style.backgroundImage="linear-gradient("+enTop+", "+enBot+")";});
		
		var enBot = document.getElementById("enBot").value;document.getElementById("english").style.backgroundImage="linear-gradient("+enTop+", "+enBot+")";
		document.getElementById("enBot").addEventListener("keyup", function(){enBot=document.getElementById("enBot").value;document.getElementById("english").style.backgroundImage="linear-gradient("+enTop+", "+enBot+")";});
		
		var enText = document.getElementById("enText").value;document.getElementById("english").style.color=enText;
		document.getElementById("enText").addEventListener("keyup", function(){enText=document.getElementById("enText").value;document.getElementById("english").style.color=enText;});
		
		var enFont = document.getElementById("enFont").value;document.getElementById("english").style.fontSize=enFont;
		document.getElementById("enFont").addEventListener("keyup", function(){enFont=document.getElementById("enFont").value;document.getElementById("english").style.fontSize=enFont;});
		
		var arFont = document.getElementById("arFont").value;document.getElementById("arabic").style.fontSize=arFont;
		document.getElementById("arFont").addEventListener("keyup", function(){arFont=document.getElementById("arFont").value;document.getElementById("arabic").style.fontSize=arFont;});
		
		var transitionSpeedO = document.getElementById("tSpeedO").value;
		document.getElementById("tSpeedO").addEventListener("keyup", function(){transitionSpeedO=document.getElementById("tSpeedO").value;});
		
		var height = document.getElementById("height").value;
		document.getElementById("height").addEventListener("keyup", function(){height=document.getElementById("height").value;});
		
		var width = document.getElementById("width").value;
		document.getElementById("width").addEventListener("keyup", function(){width=document.getElementById("width").value;});
		
		var arTopO = document.getElementById("arTopO").value;
		document.getElementById("arTopO").addEventListener("keyup", function(){arTopO=document.getElementById("arTopO").value;});
		
		var arBotO = document.getElementById("arBotO").value;
		document.getElementById("arBotO").addEventListener("keyup", function(){arBotO=document.getElementById("arBotO").value;});
		
		var arTextO = document.getElementById("arTextO").value;
		document.getElementById("arTextO").addEventListener("keyup", function(){arTextO=document.getElementById("arTextO").value;});
		
		var enTopO = document.getElementById("enTopO").value;
		document.getElementById("enTopO").addEventListener("keyup", function(){enTopO=document.getElementById("enTopO").value;});
		
		var enBotO = document.getElementById("enBotO").value;
		document.getElementById("enBotO").addEventListener("keyup", function(){enBotO=document.getElementById("enBotO").value;});
		
		var enTextO = document.getElementById("enTextO").value;
		document.getElementById("enTextO").addEventListener("keyup", function(){enTextO=document.getElementById("enTextO").value;});
		
		var enFontO = document.getElementById("enFontO").value;
		document.getElementById("enFontO").addEventListener("keyup", function(){enFontO=document.getElementById("enFontO").value;});
		
		var arFontO = document.getElementById("arFontO").value;
		document.getElementById("arFontO").addEventListener("keyup", function(){arFontO=document.getElementById("arFontO").value;});
		
		var startPage = document.getElementById("startPage");
		var duaNamesElement = document.getElementById("duaNames");
		var ziyaraNamesElement = document.getElementById("ziyaraNames");
		var ramNamesElement = document.getElementById("ramDuaNames");
		
		//Open dua.json file, parse, and populate dua names, with value set as index
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
		  if (this.readyState == 4 && this.status == 200) {
			duaObj = JSON.parse(this.responseText);
			for(var i=0; i<duaObj.length; i++){
				var newName=document.createElement("div");
				newName.classList.add("duaName");
				newName.innerHTML=duaObj[i].title;
				newName.setAttribute("value", i);
				
				duaNamesElement.appendChild(newName);
			}
		  }
		};
		xmlhttp.open("GET", "duas.json", true);
		xmlhttp.send();
		
		//Open ziyarat.json file, parse, and populate ziyara names, with value set as index
		var xmlhttp1 = new XMLHttpRequest();
		xmlhttp1.onreadystatechange = function() {
		  if (this.readyState == 4 && this.status == 200) {
			ziyaraObj = JSON.parse(this.responseText);
			for(var i=0; i<ziyaraObj.length; i++){
				var newName=document.createElement("div");
				newName.classList.add("ziyaraName");
				newName.innerHTML=ziyaraObj[i].title;
				newName.setAttribute("value", i);
				
				ziyaraNamesElement.appendChild(newName);
			}
		  }
		};
		xmlhttp1.open("GET", "ziyarat.json", true);
		xmlhttp1.send();
		
		var xmlhttp1 = new XMLHttpRequest();
		xmlhttp1.onreadystatechange = function() {
		  if (this.readyState == 4 && this.status == 200) {
			ramObj = JSON.parse(this.responseText);
			for(var i=0; i<ramObj.length; i++){
				var newName=document.createElement("div");
				newName.classList.add("ramDuaName");
				newName.innerHTML=ramObj[i].title;
				newName.setAttribute("value", i);
				
				ramNamesElement.appendChild(newName);
			}
		  }
		};
		xmlhttp1.open("GET", "ramadan.json", true);
		xmlhttp1.send();
		
		//if the window is clicked, check if dua or ziyara is clicked, direct to function
		window.onclick = e => {
			if(e.target.classList[0]=="duaName"){
				goToDua(e.target.getAttribute("value"));
			}else if(e.target.classList[0]=="ziyaraName"){
				goToZiyara(e.target.getAttribute("value"));
			}else if(e.target.classList[0]=="ramDuaName"){
				goToRam(e.target.getAttribute("value"));
			}
		} 
		
		
		/* DUA/ZIYARA SLIDE */
		var arabic;
		var english;
		var arabicObj = document.getElementById("arabic");
		var englishObj = document.getElementById("english");
		var index = 0;
		var duaPage = document.getElementById("duaPage");
		
		
		//stop display of start page, populate arabic and english dua arrays, display first line, add event listener to see if button is pressed
		function goToDua(i){
			if(slideshow){
				alert("Use the A and D keys to navigate between lines. Press Q to quit.");
				startPage.style.display="none";
				duaPage.style.display="";
				arabic=duaObj[i].arabic.split("\n");
				english=duaObj[i].english.split("\n");
				arabicObj.innerHTML = arabic[0];
				englishObj.innerHTML = english[0];
				document.addEventListener('keypress', nextOrBack);
			}else{
				alert("Use the A and D keys to navigate between lines.");
				window.open("overlay.html?dua&"+i+"&"+transitionSpeedO+"&"+arTopO+"&"+arBotO+"&"+arTextO+"&"+enTopO+"&"+enBotO+"&"+enTextO+"&"+enFontO+"&"+arFontO, '_blank',"menubar=1,resizable=0,height="+height+",width="+width+",innerHeight="+height+",innerWidth="+width); 
			}
		}
		function goToZiyara(i){
			if(slideshow){
				alert("Use the A and D keys to navigate between lines. Press Q to quit.");
				startPage.style.display="none";
				duaPage.style.display="";
				arabic=ziyaraObj[i].arabic.split("\n");
				english=ziyaraObj[i].english.split("\n");
				arabicObj.innerHTML = arabic[0];
				englishObj.innerHTML = english[0];
				document.addEventListener('keypress', nextOrBack);
			}else{
				alert("Use the A and D keys to navigate between lines.");
				window.open("overlay.html?ziyara&"+i+"&"+transitionSpeedO+"&"+arTopO+"&"+arBotO+"&"+arTextO+"&"+enTopO+"&"+enBotO+"&"+enTextO+"&"+enFontO+"&"+arFontO, '_blank',"menubar=1,resizable=0,height="+height+",width="+width+",innerHeight="+height+",innerWidth="+width); 
			}
		}
		function goToRam(i){
			if(slideshow){
				alert("Use the A and D keys to navigate between lines. Press Q to quit.");
				startPage.style.display="none";
				duaPage.style.display="";
				arabic=ramObj[i].arabic.split("\n");
				english=ramObj[i].english.split("\n");
				arabicObj.innerHTML = arabic[0];
				englishObj.innerHTML = english[0];
				document.addEventListener('keypress', nextOrBack);
			}else{
				alert("Use the A and D keys to navigate between lines.");
				window.open("overlay.html?ram&"+i+"&"+transitionSpeedO+"&"+arTopO+"&"+arBotO+"&"+arTextO+"&"+enTopO+"&"+enBotO+"&"+enTextO+"&"+enFontO+"&"+arFontO, '_blank',"menubar=1,resizable=0,height="+height+",width="+width+",innerHeight="+height+",innerWidth="+width); 
			}
		}
		
		var disapp;
		var reapp;
		//If right pressed, next line, unless on last line, if left pressed, previous line, unless first line
		function nextOrBack(e) {
			switch(e.code){
				case "KeyD":
				case "ArrowRight":
					var transitionFrames = 0.03;
					clearInterval(disapp);
					clearInterval(reapp);
					index++;
					if(index<arabic.length){
						var x = 1;
						arabicObj.style.opacity=1;
						englishObj.style.opacity=1;
						disapp = setInterval(function(){
							arabicObj.style.opacity=x;
							englishObj.style.opacity=x;
							if(x<0){
								x=0;
								arabicObj.style.opacity=0;
								englishObj.style.opacity=0;
								clearInterval(disapp);
								arabicObj.innerHTML = arabic[index];
								englishObj.innerHTML = english[index];
								reapp = setInterval(function(){
									arabicObj.style.opacity=x;
									englishObj.style.opacity=x;
									if(x>1){
										clearInterval(reapp);
										x=1;
									}
									x+=transitionFrames;
								}, transitionSpeed);
							}
							x-=transitionFrames;
						}, transitionSpeed);
						
					}else{
						index--;
					}
					break;
				case "KeyA":
				case "ArrowLeft":
					index--;
					if(index>=0){
						arabicObj.innerHTML = arabic[index];
						englishObj.innerHTML = english[index];
					}else{
						index++;
					}
					break;
				case "KeyQ":
					index=0;
					startPage.style.display="";
					document.removeEventListener('keypress', nextOrBack);
					duaPage.style.display="none";
					clearInterval(reapp);
					clearInterval(disapp);
					arabicObj.style.opacity=1;
					englishObj.style.opacity=1;
					break;
			}
			
		}
		
	</script>
</body>

</html>